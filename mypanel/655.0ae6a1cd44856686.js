"use strict";(self.webpackChunkopenmediavault_workbench=self.webpackChunkopenmediavault_workbench||[]).push([[655],{7655:(k,P,s)=>{s.r(P),s.d(P,{DiagnosticsModule:()=>K});var C=s(6895),J=s(9394),f=s(5166),i=s(8584),g=s(9076),x=s(3642),o=s(4650),p=s(1327);let R=(()=>{class e{constructor(){this.config={graphs:[{name:"cpu-0"}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-rrd-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[p.M],encapsulation:2}),e})(),T=(()=>{class e{constructor(){this.config={graphs:[{name:'df-{{ "root" if mountpoint == "/" else mountpoint | substr(1) | replace("/", "-") }}'}],label:'{{ devicefile }}{{ " [" + label + "]" if label }}{{ " [" + "System" | translate + "]" if mountpoint == "/" }}',store:{proxy:{service:"FileSystemMgmt",get:{method:"enumerateMountedFilesystems",params:{includeroot:!0}}},sorters:[{prop:"devicefile",dir:"asc"}]}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-rrd-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[p.M],encapsulation:2}),e})(),U=(()=>{class e{constructor(){this.config={graphs:[{name:"load"}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-rrd-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[p.M],encapsulation:2}),e})(),F=(()=>{class e{constructor(){this.config={graphs:[{name:"memory"}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-rrd-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[p.M],encapsulation:2}),e})(),b=(()=>{class e{constructor(){this.config={graphs:[{name:"interface-{{ devicename }}"}],label:"{{ devicename }}",store:{proxy:{service:"Network",get:{method:"enumerateConfiguredDevices"}},sorters:[{prop:"devicefile",dir:"asc"}]}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-rrd-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[p.M],encapsulation:2}),e})(),M=(()=>{class e{constructor(){this.config={graphs:[{name:"uptime"}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-rrd-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[p.M],encapsulation:2}),e})();var d=s(3145);let L=(()=>{class e{constructor(){this.config={hasReloadButton:!0,request:{service:"System",get:{method:"getTopInfo"}}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-text-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[d.B],encapsulation:2}),e})(),D=(()=>{class e{constructor(){this.config={hasCopyToClipboardButton:!0,request:{service:"System",get:{method:"getDiagnosticReport"}}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-text-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[d.B],encapsulation:2}),e})(),I=(()=>{class e{constructor(){this.config={hasReloadButton:!0,request:{service:"SMB",get:{method:"getStats"}}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-text-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[d.B],encapsulation:2}),e})(),B=(()=>{class e{constructor(){this.config={hasReloadButton:!0,request:{service:"SSH",get:{method:"getStats"}}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-text-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[d.B],encapsulation:2}),e})();var S=s(7582),Z=s(1764),Q=s.n(Z),c=s(7489),N=s(727),X=s(5677),u=s(7169),w=s(4561),A=s(2278),v=s(7839);class l{constructor(n,t){this.binaryUnitPipe=n,this.systemInformationService=t,this.subscriptions=new N.w0,this.config={limit:0,autoReload:!1,hasActionBar:!1,hasHeader:!1,hasFooter:!1,selectionType:"none",columns:[{prop:"name",flexGrow:1,cellClass:"omv-font-weight-bold",cellTemplateName:"template",cellTemplateConfig:"{{ name | translate }}"},{prop:"value",flexGrow:3,cellTemplateName:"shapeShifter"}],store:{data:[],fields:["name","value"]}},this.subscriptions.add(this.systemInformationService.systemInfo$.subscribe(a=>{const m=[],r={hostname:{name:(0,i.J)("Hostname"),value:{type:"text",value:c.get(a,"hostname")}},version:{name:(0,i.J)("Version"),value:{type:"text",value:(0,u.h8)(c.get(a,"version"))}},cpuModelName:{name:(0,i.J)("Processor"),value:{type:"text",value:(0,u.h8)(c.get(a,"cpuModelName"))}},kernel:{name:(0,i.J)("Kernel"),value:{type:"text",value:(0,u.h8)(c.get(a,"kernel"))}},time:{name:(0,i.J)("System Time"),value:{type:"localeDateTime",value:c.get(a,"ts")}},uptime:{name:(0,i.J)("Uptime"),value:{type:"relativeTime",value:Q()().unix()-c.get(a,"uptime")}},loadAverage:{name:(0,i.J)("Load Average"),value:{type:"text",value:(0,u.WU)("{{ loadAverage.1min | tofixed(2) }}, {{ loadAverage.5min | tofixed(2) }}, {{ loadAverage.15min | tofixed(2) }}",a)}},cpuUsage:{name:(0,i.J)("CPU Usage"),value:{type:"progressBar",text:`${a.cpuUsage?.toFixed(1)}%`,value:a.cpuUsage?.toFixed(1)}},memUsed:{name:(0,i.J)("Memory Usage"),value:{type:"progressBar",text:`${(100*a.memUtilization).toFixed(1)}% of ${this.binaryUnitPipe.transform(a.memTotal)}`,value:(100*a.memUtilization).toFixed(1)}}};c.forEach(r,(y,W)=>{c.has(a,W)&&m.push(y)}),this.config.store.data=m}))}}l.\u0275fac=function(n){return new(n||l)(o.Y36(w.Q),o.Y36(A.V))},l.\u0275cmp=o.Xpm({type:l,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"config"]],template:function(n,t){1&n&&o._UZ(0,"omv-intuition-datatable-page",0),2&n&&o.Q6J("config",t.config)},dependencies:[v.N],encapsulation:2}),(0,S.gn)([(0,X.fs)(),(0,S.w6)("design:type",Object)],l.prototype,"subscriptions",void 0);var j=s(8897),z=s(2598),H=s(214);let $=(()=>{class e{constructor(t,a){this.rpcService=t,this.logConfigService=a,this.config={autoLoad:!1,autoReload:!1,remoteSorting:!0,remotePaging:!0,limit:15,selectionType:"none",sorters:[],columns:[],store:{data:[]},actions:[{type:"select",placeholder:(0,i.J)("Select a system log ..."),selectionChange:this.onSelectionChange.bind(this),store:{data:[]}},{type:"divider"},{type:"iconButton",icon:"download",tooltip:(0,i.J)("Download"),click:this.onDownload.bind(this),enabledConstraints:{callback:()=>c.isString(this.logId)}}]}}ngOnInit(){this.logConfigService.configs$.subscribe(t=>{this.config.actions[0].store.data=c.chain(t).sortBy(["text"]).map(a=>({text:(0,j.Iu)(a.text),value:a.id})).value()})}onSelectionChange(t,a){this.logConfigService.configs$.subscribe(m=>{const r=m.find(y=>y.id===a);c.isUndefined(r)||(this.logId=a,this.config.stateId=r.id,this.config.columns=r.columns,this.config.sorters=r.sorters,this.config.store.proxy={service:r.request.service,get:{method:r.request.method,params:r.request.params}},setTimeout(()=>{this.page.table.offset=0,this.page.table.updateColumns(),this.page.table.reloadData()}))})}onDownload(){this.rpcService.download("LogFile","getContent",{id:this.logId})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(z.G),o.Y36(H.L))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(t,a){if(1&t&&o.Gf(v.N,7),2&t){let m;o.iGM(m=o.CRH())&&(a.page=m.first)}},decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-datatable-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[v.N],encapsulation:2}),e})();var G=s(7713),Y=s(6316);let E=(()=>{class e extends G.Fy{constructor(){super(...arguments),this.config={request:{service:"Syslog",get:{method:"getSettings"},post:{method:"setSettings"}},fields:[{type:"checkbox",name:"enable",label:(0,i.J)("Enabled"),hint:(0,i.J)("Enable remote logging of syslog to the specified host."),value:!1},{type:"textInput",name:"host",label:(0,i.J)("Host"),value:"",validators:{patternType:"domainNameIp",requiredIf:{operator:"eq",arg0:{prop:"enable"},arg1:!0}}},{type:"numberInput",name:"port",label:(0,i.J)("Port"),value:514,validators:{min:1,max:65535,required:!0,patternType:"port"}},{type:"select",name:"protocol",label:(0,i.J)("Protocol"),value:"udp",store:{data:[["tcp",(0,i.J)("TCP")],["udp",(0,i.J)("UDP")]]}}],buttons:[{template:"submit"},{template:"cancel",execute:{type:"url",url:"/diagnostics/system-logs"}}]}}}return e.\u0275fac=function(){let n;return function(a){return(n||(n=o.n5z(e)))(a||e)}}(),e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],features:[o.qOj],decls:1,vars:1,consts:[[3,"config"]],template:function(t,a){1&t&&o._UZ(0,"omv-intuition-form-page",0),2&t&&o.Q6J("config",a.config)},dependencies:[Y.g],encapsulation:2}),e})();var O=s(1885);const h=[{path:"",component:g.Z},{path:"system-information",component:l,data:{title:(0,i.J)("System Information")}},{path:"processes",component:L,data:{title:(0,i.J)("Processes")}},{path:"report",component:D,data:{title:(0,i.J)("Report")}},{path:"system-logs",data:{title:(0,i.J)("System Logs")},children:[{path:"",component:g.Z},{path:"logs",component:$,data:{title:(0,i.J)("Logs")}},{path:"remote",component:E,canDeactivate:[O.e],data:{title:(0,i.J)("Remote"),notificationTitle:(0,i.J)("Updated remote system-logs settings."),editing:!0}}]},{path:"performance-statistics",data:{title:(0,i.J)("Performance Statistics")},children:[{path:"",component:g.Z},{path:"cpu",component:R,data:{title:(0,i.J)("CPU")}},{path:"disk-usage",component:T,data:{title:(0,i.J)("Disk Usage")}},{path:"load",component:U,data:{title:(0,i.J)("Load Average")}},{path:"memory",component:F,data:{title:(0,i.J)("Memory Usage")}},{path:"network-interfaces",component:b,data:{title:(0,i.J)("Network Interfaces")}},{path:"uptime",component:M,data:{title:(0,i.J)("Uptime")}}]},{path:"services",data:{title:(0,i.J)("Services")},children:[{path:"",component:g.Z},{path:"smb",component:I,data:{title:(0,i.J)("SMB/CIFS")}},{path:"ssh",component:B,data:{title:(0,i.J)("SSH")}}]}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[{provide:f.Z6,multi:!0,useFactory:n=>(n.inject("diagnostics",h),h),deps:[x.o]}],imports:[f.Bz.forChild(h),f.Bz]}),e})(),K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[C.ez,J.I,V]}),e})()}}]);